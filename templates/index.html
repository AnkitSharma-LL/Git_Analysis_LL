<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <title>Git Analysis</title>
  <style>
  .styled_table {
    overflow-y: auto;
    height: 110px;
  }
  .styled_table thead th {
    position: sticky;
    top: 0;
  }
  table {
    border-collapse: collapse;        
    width: 100%;
  }
  th,
  td {
    padding: 8px 15px;
    border: 2px solid #529432;
  }
  th {
    background: #ABDD93;
  }
  select{
    width:100px;
  }
  footer {
    background-color: #9c43c5; 
    text-align: center; 
    padding: 10px;
    bottom:0;
    width:100%;
    height:60px;
    position: fixed; 
  }
  </style>
 
</head>
<body style="background-color:rgb(234, 148, 111);">
  <div>
    <img alt="Liquiloans"  src="https://miro.medium.com/v2/resize:fit:708/1*LSNWlfKqhzt06C8YI3QhXA.png" width="354" height="60" loading="lazy">
    <h1>Git Analysis</h1>
  </div>

    <div class = "top-par" style="  position: absolute;left: 60%;top: 2%;width: 60%;height: 10%;">
      <ul class="nav navbar-nav justify-content-end">
        <li class="nav-item">
          <a class="navbar-brand" href="https://www.liquiloans.com/">Home</a>
        <li class="nav-item">
          <a class="navbar-brand" href="https://www.liquiloans.com/about-us">About</a>
        </li>
        <li class="nav-item">
          <a class="navbar-brand" href = "//www.liquiloans.com/business-model">Business Model</a>
        </li>
        <li class="nav-item">
          <a class="navbar-brand" href="https://in.linkedin.com/company/liquiloans">Linkedin</a>
        </li>
        <li class="nav-item">
          <a class="navbar-brand" href="https://www.liquiloans.com/careers">Careers</a>
        </li>
      </ul>
    </div>
    <!-- <iframe name="hiddenFrame"></iframe> -->
    <form  action="/all_commits" method="post">
      <label for = "repo">Github Repos: </label>
      
      <select name="repo_name" size="1" onclick="setDatesforweek()">
        {% for repo in repo_list %}
          <option value="{{ repo }}"  SELECTED>{{ repo }}</option>
        {% endfor %}     
      </select>

      <label for="startDate">From:</label>
      <input type="date" id="startDate" name="startDate">
      <label for="endDate">To:</label>
      <input type="date" id="endDate" name="endDate">
  
      <button type="submit"><i class="fa fa-search">Get All Commits</i></button>
      <button onclick="setDates()">Last 3 Months</button>
      <button onclick="setDatesforonemonth()">Last  Months</button>
      <!-- <button onclick="setDatesforweek()">Last  Week</button> -->
      <table class = "styled_table"> 
        <thead> 
        <tr> 
            <th>Date</th> 
            <th>Name</th>
            <th>Message</th> 
        </tr> 
        </thead> 
        <tbody> 
            {% for row in commit_list %}  
                <tr> 
                    <td>{{row[0]}}</td>
                    <td>{{row[1]}}</td>
                    <td>{{row[2]}}</td>  
                </tr> 
            {% endfor %} 
        </tbody> 
    </table>

    </form>

<footer class="style-1">
  <div class="col-md-4 col-xs-12">
    <span class="copyright" style="color:white;"> â’¸ 2023  	Liquiloans All rights reserved.
    </span><br>
    <span class="copyright" style="color: white;">  NDX P2P Private Limited.</span>
  </div>
</footer>
    <script>
      
        function setDates() {
          const today = new Date();
          const threeMonthsAgo = new Date();
          threeMonthsAgo.setMonth(today.getMonth() - 3);

          const formattedToday = today.toISOString().slice(0, 10);
          const formattedThreeMonthsAgo = threeMonthsAgo.toISOString().slice(0, 10);

          document.getElementById("startDate").value = formattedThreeMonthsAgo;
          document.getElementById("endDate").value = formattedToday;
        }
        function setDatesforonemonth() {
          const today = new Date();
          const threeMonthsAgo = new Date();
          threeMonthsAgo.setMonth(today.getMonth() - 1);

          const formattedToday = today.toISOString().slice(0, 10);
          const formattedThreeMonthsAgo = threeMonthsAgo.toISOString().slice(0, 10);

          document.getElementById("startDate").value = formattedThreeMonthsAgo;
          document.getElementById("endDate").value = formattedToday;
        }
        setDatesforweek

        function setDatesforweek() {
          const today = new Date();
          const lastWeek = new Date(today);
          lastWeek.setDate(today.getDate() - 7);


          const formattedToday = today.toISOString().slice(0, 10);
          const formattedlastweek= lastWeek.toISOString().slice(0, 10);

          document.getElementById("startDate").value = formattedlastweek;
          document.getElementById("endDate").value = formattedToday;
        }
    </script>

      
</body>
</html